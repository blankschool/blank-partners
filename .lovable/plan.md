

# RelatÃ³rio de Controle de Escopo

## Objetivo

Adicionar um painel de estatÃ­sticas na pÃ¡gina de Controle de Escopo que exiba:
1. **Taxa de conclusÃ£o geral** - Percentual global de entregas realizadas vs. planejadas
2. **Taxa de conclusÃ£o por canal** - Percentual de cada canal (IG, TikTok, LinkedIn, YT Shorts, YT Videos, GravaÃ§Ãµes)

## VisualizaÃ§Ã£o Proposta

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ“Š Controle de Escopo                                       [MÃªs/Ano â–¼]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ“ˆ RELATÃ“RIO DE ESCOPO                                                â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚    â”‚
â”‚  â”‚  â”‚   Taxa Geral: 78%    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘                       â”‚    â”‚
â”‚  â”‚  â”‚   152/195 entregas   â”‚                                              â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚  Por Canal:                                                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”                     â”‚    â”‚
â”‚  â”‚  â”‚  IG   â”‚  TT   â”‚  LI   â”‚  YTS  â”‚  YTV  â”‚ Grav  â”‚                     â”‚    â”‚
â”‚  â”‚  â”‚  85%  â”‚  72%  â”‚  90%  â”‚  65%  â”‚  80%  â”‚  70%  â”‚                     â”‚    â”‚
â”‚  â”‚  â”‚ 34/40 â”‚ 18/25 â”‚ 27/30 â”‚ 13/20 â”‚ 40/50 â”‚ 21/30 â”‚                     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                â”‚
â”‚  â”Œâ”€ Tabela de Clientes (existente) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ...                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ImplementaÃ§Ã£o TÃ©cnica

### 1. Novo Componente: ScopeStatsPanel

Criar `src/components/scope/ScopeStatsPanel.tsx`:

- Recebe os dados do `useScopeControl`
- Calcula as mÃ©tricas de forma derivada (sem novas queries)
- Exibe cards com estatÃ­sticas visuais

### 2. LÃ³gica de CÃ¡lculo

```typescript
// Para cada canal
const calculateChannelStats = (data: ScopeControlData[], channel: ScopeField) => {
  const totalPlanned = data.reduce((sum, item) => sum + (item.client.scope?.[channel] || 0), 0);
  const totalActual = data.reduce((sum, item) => sum + (item.actual?.[channel] || 0), 0);
  const percentage = totalPlanned > 0 ? Math.round((totalActual / totalPlanned) * 100) : 0;
  return { planned: totalPlanned, actual: totalActual, percentage };
};

// Taxa geral (soma de todos os canais)
const calculateOverallStats = (data: ScopeControlData[]) => {
  const channels = ["instagram", "tiktok_posts", "linkedin_posts", "youtube_shorts", "youtube_videos", "recordings"];
  let totalPlanned = 0;
  let totalActual = 0;
  
  channels.forEach(channel => {
    data.forEach(item => {
      totalPlanned += item.client.scope?.[channel] || 0;
      totalActual += item.actual?.[channel] || 0;
    });
  });
  
  const percentage = totalPlanned > 0 ? Math.round((totalActual / totalPlanned) * 100) : 0;
  return { planned: totalPlanned, actual: totalActual, percentage };
};
```

### 3. Componentes Visuais

| Elemento | DescriÃ§Ã£o |
|----------|-----------|
| Card principal | Exibe taxa geral com barra de progresso grande |
| Grid de canais | 6 mini-cards, um para cada canal |
| Barra de progresso | Usa componente `Progress` existente |
| Cores dinÃ¢micas | Verde (>=100%), Amarelo (50-99%), Vermelho (<50%) |

### 4. IntegraÃ§Ã£o na PÃ¡gina

Atualizar `src/pages/ScopeControl.tsx`:
- Importar novo componente `ScopeStatsPanel`
- Renderizar acima da tabela existente
- Passar os mesmos dados do hook `useScopeControl`

## Arquivos a Criar/Modificar

| Arquivo | AÃ§Ã£o |
|---------|------|
| `src/components/scope/ScopeStatsPanel.tsx` | Criar componente de estatÃ­sticas |
| `src/pages/ScopeControl.tsx` | Adicionar painel de estatÃ­sticas |

## Detalhes do Design

### Card de Taxa Geral
- Ãcone: `TrendingUp` ou `PieChart`
- Valor grande: "78%"
- Subtexto: "152 de 195 entregas"
- Barra de progresso visual

### Cards por Canal
- Layout em grid responsivo (2 colunas mobile, 3 tablet, 6 desktop)
- Ãcone do canal (Instagram, Video, etc.)
- Percentual em destaque
- ProporÃ§Ã£o (ex: "34/40")
- Mini barra de progresso

### Cores de Status
- **Verde**: >= 100% (meta atingida ou superada)
- **Amarelo**: 50% - 99% (em andamento)
- **Vermelho**: < 50% (atenÃ§Ã£o necessÃ¡ria)

